@page "/message"
@using MessagingApp.Data

@foreach (var message in messages)
{
    <Message details="@message"/>
}

<PostNew OnPosted="HandleNewMessage"/>

@code   {
    protected List<PostMessage> messages { get; set; }

    protected override void OnInitialized()
    {
        messages = new List<PostMessage>
        {
            new PostMessage { PostedBy = "Bobby", PostedOn = DateTime.Now, Message = "Hello World!" },
            new PostMessage { PostedBy = "Alice", PostedOn = DateTime.Now, Message = "How are things?" },
            new PostMessage { PostedBy = "Nick", PostedOn = DateTime.Now, Message = "The app works if you are seeing this!" },
        };
    }

    public void HandleNewMessage(PostMessage message)
    {
        messages.Add(message);
    }
}